[Unit]
Description=Velocity Server
After=network.target

[Service]
WorkingDirectory={{ velocity_path }}

User={{ velocity_user }}
Group={{ velocity_group }}

ExecStart=/usr/bin/java {{ velocity_java_arguments }} -jar {{ velocity_path }}/velocity.jar
ExecStop=/bin/sh -c 'echo "shutdown" | socat - "FD:/proc/$MAINPID/fd/0"'

Restart=always
RestartSec=5s

StandardInput=null
StandardOutput=journal
StandardError=journal

[Install]
WantedBy=multi-user.target
